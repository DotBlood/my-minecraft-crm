<template>
  <Dashboard>
    <h1 class="text-3xl font-bold mb-6">üõí –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞–º–∏</h1>

    <!-- –§–æ—Ä–º–∞ –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Ç–æ–≤–∞—Ä–∞ -->
    <div class="bg-white p-6 rounded-lg shadow-md mb-6">
      <h2 class="text-xl font-bold mb-4">‚ûï –î–æ–±–∞–≤–∏—Ç—å —Ç–æ–≤–∞—Ä</h2>
      <form @submit.prevent="addProduct(newProduct.name, newProduct.price, newProduct.stock)">
        <div class="flex gap-4">
          <input v-model="newProduct.name" type="text" class="input input-bordered w-full" placeholder="–ù–∞–∑–≤–∞–Ω–∏–µ —Ç–æ–≤–∞—Ä–∞" required />
          <input v-model.number="newProduct.price" type="number" class="input input-bordered w-32" placeholder="–¶–µ–Ω–∞" required min="1" />
          <input v-model.number="newProduct.stock" type="number" class="input input-bordered w-32" placeholder="–ö–æ–ª-–≤–æ" required min="0" />
          <button type="submit" class="btn btn-primary">–î–æ–±–∞–≤–∏—Ç—å</button>
        </div>
      </form>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ -->
    <table class="w-full border-collapse border border-gray-300">
      <thead>
        <tr class="bg-gray-200">
          <th class="border p-2">ID</th>
          <th class="border p-2">–ù–∞–∑–≤–∞–Ω–∏–µ</th>
          <th class="border p-2">–¶–µ–Ω–∞</th>
          <th class="border p-2">–û—Å—Ç–∞—Ç–æ–∫</th>
          <th class="border p-2">–î–µ–π—Å—Ç–≤–∏—è</th>
        </tr>
      </thead>
      <tbody>
        <tr v-for="product in products" :key="product.id">
          <td class="border p-2">{{ product.id }}</td>
          <td class="border p-2">{{ product.name }}</td>
          <td class="border p-2">{{ product.price }} ‚ÇΩ</td>
          <td class="border p-2">{{ product.stock }}</td>
          <td class="border p-2">
            <button @click="deleteProduct(product.id)" class="bg-red-500 text-white px-2 py-1 rounded">–£–¥–∞–ª–∏—Ç—å</button>
          </td>
        </tr>
      </tbody>
    </table>
  </Dashboard>
</template>

<script setup>
import Dashboard from "@widgets/admin/dashboard/ui/Dashboard.vue";
import useProducts from "@widgets/admin/products/model/useProducts";

const { products, addProduct, deleteProduct } = useProducts();
const newProduct = ref({ name: "", price: 0, stock: 0 });
</script>
