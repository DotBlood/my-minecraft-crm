<template>
  <div class="bg-white p-6 rounded-xl shadow-lg">
    <h2 class="text-2xl font-bold mb-4">üë• –°–ø–∏—Å–æ–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</h2>

    <div v-if="users.length" class="overflow-x-auto">
      <table class="table w-full">
        <thead>
          <tr>
            <th>ID</th>
            <th>–ò–º—è</th>
            <th>–†–æ–ª—å</th>
            <th>–î–µ–π—Å—Ç–≤–∏—è</th>
          </tr>
        </thead>
        <tbody>
          <tr v-for="user in users" :key="user.id">
            <td>{{ user.id }}</td>
            <td>{{ user.name }}</td>
            <td>
              <select v-model="user.role" @change="updateRole(user.id, user.role)" class="select select-bordered w-full">
                <option value="–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä">–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
                <option value="–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä">–ú–æ–¥–µ—Ä–∞—Ç–æ—Ä</option>
                <option value="–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</option>
              </select>
            </td>
            <td>
              <button @click="deleteUser(user.id)" class="btn btn-sm btn-error">üóëÔ∏è –£–¥–∞–ª–∏—Ç—å</button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
    <p v-else class="text-center text-lg text-base-content/50">–ù–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π</p>
  </div>
</template>

<script setup>
import { defineProps, defineEmits } from "vue";

const props = defineProps({
  users: {
    type: Array,
    required: true,
  },
});

const emit = defineEmits(["updateRole", "deleteUser"]);

const updateRole = (id, newRole) => {
  emit("updateRole", id, newRole);
};

const deleteUser = (id) => {
  emit("deleteUser", id);
};
</script>
